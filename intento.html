<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <title>Star Wars: Personajes</title>
    </head>
    <body>
      <header>
        <div class="container">
            <div class="row pt-5">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <h1 class="display-4 text-center py-2">Star Wars: A New Hope</h1>
                    <p class="lead">
                        La primera película de star wars fue estrenada el año 1977 en estados unidos. Luego, en 1997 se renombró como Star Wars: Episode IV: A New Hope.
                        <a href="https://raw.githubusercontent.com/MillarayNanculeo/starwars/main/starwarcsv.csv" target="_blank" class="link-light">42 personajes</a> que tienen participación en el primer estreno de star wars, podemos obtener algunos datos:
                    </p>
                </div>
            </div>
        </div>
        </header>
      <main>
        <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
  <!--Especies-->
            <div class="accordion-item rounded-0">
                <h2 class="accordion-header bg-dark" id="headingOne">
                    <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Especie, raza</button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                    <div class="accordion-body text-black-50">
                        <p>En el episodio IV de Star Wars hay <span id="personajes_humanos"></span> personajes humanos y <span id="personajes_nohumanos"></span> personajes no humanos </p>
                        <canvas id="primergrafico" width="100" height="100" class="m-5"></canvas>
                    </div>
                </div>
            </div>
  <!--Masculinos y femeninos-->
            <div class="accordion-item rounded-0">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Género</button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                    <div class="accordion-body text-black-50">
                      <p>En el episodio IV de Star Wars hay <span id="pmasculinos"></span> personajes masculinos y <span id="pfemeninos"></span> personajes femeninos </p>
                        <canvas id="segundografico" width="100" height="100" class="m-5"></canvas>
                    </div>
                </div>
            </div>
  <!--Apariciones-->
            <div class="accordion-item rounded-0">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Popularidad</button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                    <div class="accordion-body text-black-50">
                      <p>Algunos personajes fueron más recordados que otros </p>
                      <canvas id="tercergrafico" width="100" height="100" class="m-5"></canvas>
                    </div>
                </div>
            </div>
            <!--Otros-->
            <div class="accordion-item rounded-0">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Sobrevivientes</button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                    <div class="accordion-body text-black-50">
                        <p>Sobrevivieron <span id="losquevivieron"></span> y murieron <span id="losquemurieron"></span></p>
                        <canvas id="sobreviven" width="100" height="100" class="m-5"></canvas>
                    </div>
                </div>
            </div>



          </div>

        </main>
        <!--bootstrap-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!--charts-->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
<script>
  async function todo() {
      //el fetch
      const consulta = await fetch("https://raw.githubusercontent.com/MillarayNanculeo/starwars/main/data.json");
      const data = await consulta.json();
      console.log(data);

      //variables gráfico especies
      var personajes_humanos = 0;
      var personajes_nohumanos = 0;

      data.forEach((d) => {
          edades.push(d.species);
          //aprovechar el mismo ForEach
          if (d.species == "human") {
              personajes_humanos = personajes_humanos + 1;
          } else {
              personajes_nohumanos = personajes_nohumanos + 1; }
  });

      console.log(personajes_humanos);

      document.querySelector("Hpersonaje").innerHTML = personajes_humanos;
      document.querySelector("Npersonaje").innerHTML = personajes_nohumanos;


      new Chart(document.getElementById("especie").getContext("2d"), {
          type: "bar",
          data: {
              labels: ["personajes_humanos", "personajes_nohumanos"],
              datasets: [{ data: [humanos, hombres], label: "Sexo", backgroundColor: ["#9ebcda", "#8856a7"] }],
          },
      });
    }
  todo().catch((error) => console.error(error));
  </script>

    </body>
    </html>
