<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            :root {
                --bs-body-color: #eef;
                --bs-body-bg: #10121c;
            }
            body {
                background-image: url(img/fondo.jpg);
                background-repeat: no-repeat;
                background-position: center bottom;
                background-size: 100% auto;
            }
        </style>
        <title>Star Wars: A New Hope</title>
    </head>
    <body>
        <header>
            div class="container">
            <div class="row pt-5">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <h1 class="display-4 text-center py-2">Star Wars: A New Hope</h1>
                    <p class="lead">
                        La primera película de star wars fue estrenada el año 1977 en estados unidos. Luego, en 1997 se renombró como Star Wars: Episode IV: A New Hope.
                        <a href="https://raw.githubusercontent.com/MillarayNanculeo/starwars/main/starwarcsv.csv" target="_blank" class="link-light">42 personajes</a> que tienen participación en el primer estreno de star wars, podemos
                        obtener algunos datos:
                    </p>
                </div>
            </div>
        </header>

        <main class="container">
            <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
  <!--Especies-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header bg-dark" id="headingOne">
                        <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Especie, raza</button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>En el episodio IV de Star Wars hay <span id="personajes_humanos"></span> personajes humanos y <span id="personajes_nohumanos"></span> personajes no humanos</p>
                            <canvas id="primergrafico" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
<!--Masculinos y femeninos-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Género</button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>En el episodio IV de Star Wars hay <span id="total_masculino"></span> personajes masculinos, <span id="total_femenino"></span> personajes femeninos y un total de <span id="total_nn"></span> con género no definido</p>
                            <canvas id="segundografico" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
<!--Apariciones-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Popularidad</button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Algunos personajes fueron más recordados que otros</p>
                            <canvas id="tercergrafico" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
<!--Otros-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Sobrevivientes</button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Sobrevivieron <span id="losquevivieron"></span> y murieron <span id="losquemurieron"></span></p>
                            <canvas id="cuartografico" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Otro más-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">Sobrevivientes por sexo</button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Sobrevivieron <span id="Hvivos"></span> hombres y <span id="Mvivos"></span> mujeres. Y murieron <span id="Hmuertos"></span> hombres y <span id="Mmuertos"></span> mujeres.</p>
                            <canvas id="quintografico" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Fin-->
            </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p>Los registros de 891 representan una parte de los más de 2.400 personas que viajaban en el Titanic aquel fatídico 14 de abril de 1912, cuando la nave choca con el iceberg faltando minutos para la medianoche.</p>
                </div>
            </div>
        </main>

        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes: <a href="https://historia.nationalgeographic.com.es/a/historia-titanic-tragedia-barco-insumergible_16344">La historia del Titanic, la tragedia del barco insumergible</a>,
                            <a href="https://rpubs.com/paraneda/titanic">RPubs - Titanic</a>, otra y otra más.
                        </p>
                    </div>
                </div>
            </div>
        </aside>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col"><p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p></div>
                </div>
            </div>
        </footer>

        <!-- Biblioteca de Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Biblioteca Chart.js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script>
            async function todo() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/MillarayNanculeo/starwars/main/swapi.json");
                const data = await consulta.json();
                console.log(data);

                //genero
                var femenino = 0;
                var masculino = 0;
                var nn = 0;

                //consultando en cada elemento del arreglo
                data.forEach((d) => {
                    if (d.gender == "male") {
                        masculino = masculino + 1;
                    }
                    if (d.gender == "female") {
                        femenino = femenino + 1;
                    } else {
                        nn = nn + 1; }
                });

                console.log(femenino);
                console.log(masculino);
                console.log(nn);



                document.querySelector("#total_femenino").innerHTML = femenino;
                document.querySelector("#total_masculino").innerHTML = masculino;
                document.querySelector("#total_nn").innerHTML = nn;


                new Chart(document.getElementById("segundografico").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Femeninos", "Masculinos", "No determinado"],
                        datasets: [{ data: [femenino, masculino, nn], label: "Género", backgroundColor: ["#9ebcda", "#8856a7", "#5ebcda"] }],
                    },
                });
              
            }
            todo().catch((error) => console.error(error));
        </script>
    </body>
</html>
